<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.jsdelivr.net/npm/ol@v7.1.0/dist/ol.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/ol@v7.1.0/ol.css">
    <title>GEOG 456 Final Project: Visualizing rain, water, and greening at the Turner site</title>
</head>

<style>
    body {
        background: fixed;
        background-color: rgb(25, 75, 65);
        font-family: Arial, Helvetica, sans-serif;
    }
    .formatme {
        background-color: rgb(225, 255, 205);
        border: 3px;
        border-style: solid;
        border-color: rgb(100,150,60);
        color: rgb(100,150,60);
        margin-top: 10px;
        margin-bottom: 10px;
        margin-right: 10px;
        margin-left: 10px;
    }
    .map {
        border: 3px;
        border-style: solid;
        border-color: rgb(100,150,60);
    }
    
    h1 {
        color: rgb(50,100,60);
    }
    
    a {
        color: rgb(25,200,200);
    }
    
    </style>

<body>
    <div class="formatme" style="width: 75%;"><h1>Visualizing rain, water, and greening at the Turner site</h1>
        A final project for GEOG 456 by Joy Mersmann</div>
    <div class="formatme">Explanation of the map and its usage goes here.</div>
    <div id='map' class="map" style="height: 400px;"></div>
    <div id="graph" class="formatme" style="height: 200px;">Graph goes here</div>
</body>

<script>
    /*const trymedata = "./data/NDVI/20210101.tif";
    const turnerLonLat = [-90.55, 36.55];
    var turnerWM = ol.proj.fromLonLat(turnerLonLat);
    const myMap = new ol.Map({
        layers: [
            new ol.layer.Tile({source: new ol.source.OSM()}),
            new ol.layer.Tile({
                source: new ol.source.GeoTIFF({
                    sources: [
                        {
                        url: "https://joymersmann.github.io/geog456/finalproject/data/NDVI/20210101.tif",
                        },
                    ],
                }),
            }),
        ],
        view: new ol.View({
            projection: 'EPSG:3857', // here is the view projection
            center: turnerWM,
            zoom: 10,
        }),
        target: 'map',
    });*/

    fetch('data/NDVI/20210101.tif')
  .then((response) => response.blob())
  .then((blob) => {
    const source = new ol.source.GeoTIFF({
      sources: [
        {
          blob: blob,
        },
      ],
    });

    const map = new ol.Map({
      target: 'map',
      layers: [
        new ol.layer.Tile({
          source: source,
        }),
      ],
      view: source.getView().then((viewConfig) => {
        viewConfig.showFullExtent = true;
        return viewConfig;
      }),
    });
  });

    
    /*const min = 10000;
    const max = 15000;
    //const base = 'https://landsat-pds.s3.amazonaws.com/c1/L8/139/045/LC08_L1TP_139045_20170304_20170316_01_T1/LC08_L1TP_139045_20170304_20170316_01_T1';
    let response = fetch(`https://joymersmann.github.io/geog456/finalproject/data/NDVI/20210101.tif`);
    let asBlob = new Blob([`https://joymersmann.github.io/geog456/finalproject/data/NDVI/20210101.tif`], {type: 'GeoTiff'})

    const source = new ol.source.GeoTIFF({
        sources: [
            {
                url: `https://joymersmann.github.io/geog456/finalproject/data/NDVI/20210101.tif`,
                overviews: [`https://joymersmann.github.io/geog456/finalproject/data/NDVI/20210101.tif.ovr`],
                blob: asBlob,
                min: min,
                max: max,
                nodata: 0,
            },
        ],
    });

    const map = new ol.Map({
        target: 'map',
        layers: [
            new ol.layer.Tile({
                source: source,
            }),
        ],
        view: new ol.View({
            projection: 'EPSG:3857', // here is the view projection
            center: [0,0],
            zoom: 10
        }),
    });

*/



    // rgb(150, 200, 30), rgb(100,150,60), rgb(50,100,60), rgb(25,200,200)
    // <link rel="stylesheet" href="C:\dev\GEOG456Fall2022\geog456\finalproject\finalproject.css">


</script>
</html>